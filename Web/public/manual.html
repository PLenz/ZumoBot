<html>
  <body>
    <div>
      <label>x</label>
      <input type="number" id="x"></input>
    </div>
    <div>
      <label>x_neg</label>
      <input type="checkbox" id="x_neg"></input>
    </div>
    <div>
      <label>y</label>
      <input type="number" id="y"></input>
    </div>
    <div>
      <label>y_neg</label>
      <input type="checkbox" id="y_neg"></input>
    </div>
    <button onclick="sendFunction()">send</button>

    <script type="text/javascript">

    function send(message) {
      //TODO check connection readyState
      var json = JSON.stringify(message);
          connection.send(json);
          console.log(message);
    }

    function move(x, xneg, y, yneg){
      send({
              mode : 1,
              data : [x, xneg, y, yneg]
      });
    }

    function sendFunction() {
      var x_value = parseInt(document.getElementById('x').value,10);

      var x_neg_value = 0;
      if (document.getElementById('x_neg').checked==true)
        x_neg_value = 1;

      var y_value = parseInt(document.getElementById('y').value,10);

      var y_neg_value = 0;
      if (document.getElementById('y_neg').checked==true)
        y_neg_value = 1;

      move(x_value, x_neg_value, y_value, y_neg_value);
    }
    </script>
  </body>
</html>
